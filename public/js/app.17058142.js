(function(e){function t(t){for(var n,a,i=t[0],u=t[1],c=t[2],l=0,p=[];l<i.length;l++)a=i[l],o[a]&&p.push(o[a][0]),o[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);f&&f(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,a=1;a<r.length;a++){var i=r[a];0!==o[i]&&(n=!1)}n&&(s.splice(t--,1),e=u(u.s=r[0]))}return e}var n={},a={app:0},o={app:0},s=[];function i(e){return u.p+"js/"+({about:"about",page404:"page404",profile:"profile","profile-change-password":"profile-change-password","profile-main-info":"profile-main-info",signin:"signin",signup:"signup"}[e]||e)+"."+{about:"0989c842",page404:"5196e61a",profile:"09ddef14","profile-change-password":"655d068e","profile-main-info":"00944460",signin:"9e1de6a9",signup:"8604d7af"}[e]+".js"}function u(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.e=function(e){var t=[],r={about:1,page404:1,"profile-main-info":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise(function(t,r){for(var n="css/"+({about:"about",page404:"page404",profile:"profile","profile-change-password":"profile-change-password","profile-main-info":"profile-main-info",signin:"signin",signup:"signup"}[e]||e)+"."+{about:"56127cd5",page404:"7a91e2aa",profile:"31d6cfe0","profile-change-password":"31d6cfe0","profile-main-info":"171adb44",signin:"31d6cfe0",signup:"31d6cfe0"}[e]+".css",o=u.p+n,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var c=s[i],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===n||l===o))return t()}var p=document.getElementsByTagName("style");for(i=0;i<p.length;i++){c=p[i],l=c.getAttribute("data-href");if(l===n||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var n=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete a[e],f.parentNode.removeChild(f),r(s)},f.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(f)}).then(function(){a[e]=0}));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise(function(t,r){n=o[e]=[t,r]});t.push(n[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e),c=function(t){l.onerror=l.onload=null,clearTimeout(p);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+n+": "+a+")");s.type=n,s.request=a,r[1](s)}o[e]=void 0}};var p=setTimeout(function(){c({type:"timeout",target:l})},12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=n,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(r,n,function(t){return e[t]}.bind(null,n));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var f=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},2583:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("96cf");var n=r("3b8d"),a=(r("cadf"),r("551c"),r("f751"),r("097d"),r("2b0e")),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[e.loggedIn&&e.tokenExpired?r("div",{staticClass:"d-flex justify-content-center align-items-center h-100"},[r("h1",[e._v("Loading...")])]):r("router-view")],1)},s=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),u=r("2f62");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach(function(t){Object(i["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var p={data:function(){return{}},computed:l({},Object(u["d"])("auth",["user"]),{},Object(u["c"])("auth",["loggedIn","tokenExpired"]))},f=p,m=(r("7faf"),r("2877")),h=Object(m["a"])(f,o,s,!1,null,null,null),d=h.exports,g=r("8c4f"),v=r("31bd"),b=r("75fc"),w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex flex-column",staticStyle:{height:"100%"}},[r("nav",{staticClass:"navbar navbar-expand-lg navbar-light",staticStyle:{"background-color":"#1C1E3A"}},[r("div",{staticClass:"container"},[r("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e._v("\n      "+e._s(e.appName)+"\n    ")]),e._m(0),r("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarColor03"}},[r("ul",{staticClass:"navbar-nav mr-auto"},[r("li",{staticClass:"nav-item active"},[r("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[e._v("\n            Home\n          ")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:"/about"}},[e._v("\n            About\n          ")])],1)]),e.loggedIn?[e._v("\n        Hi, "),r("b",[e._v(e._s(e.user.name))]),e._v(".\n\n        "),r("button",{staticClass:"btn btn-primary btn-sm float-right ml-2",on:{click:function(t){return e.$router.push({name:"profile"})}}},[e._v("\n          Profile\n        ")]),r("button",{staticClass:"btn btn-primary btn-sm float-right ml-2",on:{click:function(t){return e.$router.push({name:"role"})}}},[e._v("\n          Roles\n        ")]),r("button",{staticClass:"btn btn-secondary btn-sm float-right ml-2",on:{click:function(t){return e.$actionWithLoading(e.logout,"loadingLogout")}}},[e.loadingLogout?r("span",[e._v("\n            Loading...\n          ")]):r("span",[e._v("\n            Logout\n          ")])])]:r("form",{staticClass:"form-inline"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputEmail"}},[e._v("\n            Email:\n          ")]),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|"+e.$formValidator.rules.email,expression:"'required|' + $formValidator.rules.email"},{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control mx-2",class:{"form-control":!0,"is-invalid":e.errors.has("email")},attrs:{id:"inputEmail","error-messages":e.errors.collect("email"),"data-vv-name":"email",type:"email",placeholder:"Enter email"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPassword"}},[e._v("\n            Password:\n          ")]),r("input",{directives:[{name:"validate",rawName:"v-validate",value:e.$formValidator.rules.password,expression:"$formValidator.rules.password"},{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],staticClass:"form-control mx-2",class:{"form-control":!0,"is-invalid":e.errors.has("password")},attrs:{id:"inputPassword","data-vv-name":"password",type:"password",placeholder:"Password"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})]),r("button",{staticClass:"btn btn-primary float-right",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e.loading?r("span",[e._v("\n            Loading...\n          ")]):r("span",[e._v("\n            Sign in\n          ")])]),r("span",{staticClass:"ml-1"},[e._v("\n          or\n          "),r("router-link",{attrs:{to:{name:"signup"}}},[e._v("Sign up")])],1)])],2)])]),r("verify-email-alert"),r("div",{staticClass:"container d-flex align-items-center justify-content-center pt-5",staticStyle:{height:"100%"}},[r("transition",{attrs:{name:"router",mode:"out-in"}},[r("router-view")],1)],1)],1)},y=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarColor03","aria-controls":"navbarColor03","aria-expanded":"false","aria-label":"Toggle navigation"}},[r("span",{staticClass:"navbar-toggler-icon"})])}],O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.$auth.user&&!e.$auth.user.hasVerifiedEmail,expression:"$auth.user && !$auth.user.hasVerifiedEmail"}],staticClass:"alert alert-primary mx-auto mt-3",attrs:{role:"alert"}},[e._v("\n  Please, verify your email. We sent a message there.\n  "),r("button",{staticClass:"btn btn-primary btn-sm ml-2",on:{click:e.resendEmailVerification}},[e.loading?r("span",[e._v("\n      Loading...\n    ")]):r("span",[e._v("\n      Resend\n    ")])])])},x=[];function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(r,!0).forEach(function(t){Object(i["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _={name:"MainLayoutVerifyEmail",data:function(){return{loading:!1}},methods:j({resendEmailVerification:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$actionWithLoading(this.resend);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},Object(u["b"])("auth/emailVerification",["resend"]))},E=_,R=Object(m["a"])(E,O,x,!1,null,"6f85c404",null),P=R.exports;function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(r,!0).forEach(function(t){Object(i["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var $={name:"MainLayout",components:{VerifyEmailAlert:P},data:function(){return{appName:"Paywage",form:{email:"test@test.com",password:"password"},loading:!1,loadingLogout:!1}},computed:T({},Object(u["d"])("auth",["user"]),{},Object(u["c"])("auth",["token","loggedIn"])),methods:T({submit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$actionWithLoading(this.signin,"loading",this.form);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},Object(u["b"])("auth",["signin","logout"]))},C=$,S=Object(m["a"])(C,w,y,!1,null,null,null),D=S.exports,N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"w-100 h-100"},[r("auth"),r("hr"),r("h2",{staticClass:"mb-4 mt-5 text-center"},[e._v("\n    Users\n  ")]),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.user,expression:"!user"}],staticClass:"alert alert-primary mx-auto w-50",attrs:{role:"alert"}},[e._v("\n    You need to be authorized to view.\n  ")]),r("table",{directives:[{name:"show",rawName:"v-show",value:e.users&&e.loggedIn,expression:"users && loggedIn"}],staticClass:"table"},[e._m(0),r("tbody",e._l(e.users,function(t){return r("tr",{key:t.id},[r("th",{attrs:{scope:"row"}},[e._v(e._s(t.id))]),r("td",[e._v(e._s(t.name))]),r("td",[e._v(e._s(t.email))]),r("td",[e._v(e._s(t.roles.name))]),r("td",[e._v(e._s(t.created_at))])])}),0)]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"text-muted text-center"},[e._v("\n    Loading...\n  ")])],1)},L=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",{staticClass:"thead-light"},[r("tr",[r("th",{attrs:{scope:"col"}},[e._v("id")]),r("th",{attrs:{scope:"col"}},[e._v("Name")]),r("th",{attrs:{scope:"col"}},[e._v("Email")]),r("th",{attrs:{scope:"col"}},[e._v("Role")]),r("th",{attrs:{scope:"col"}},[e._v("Created at")])])])}],U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"w-50 mx-auto clearfix px-5 mb-4"},[r("div",{staticClass:"d-flex justify-content-center mb-3"},[r("router-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"profile"}}},[e._v("\n      Profile(protected route)\n    ")]),r("router-link",{staticClass:"btn btn-secondary ml-2",attrs:{to:{name:"signup"}}},[e._v("\n      Sign up(only guests route)\n    ")]),r("router-link",{staticClass:"btn btn-secondary ml-2",attrs:{to:{name:"signin"}}},[e._v("\n      Sign in(only guests route)\n    ")])],1),r("b",[e._v("Logged in:")]),e._v(" "+e._s(e.loggedIn)+"\n\n  "),r("br"),r("b",[e._v("User: ")]),r("span",{directives:[{name:"show",rawName:"v-show",value:!e.user,expression:"!user"}]},[e._v("–")]),e.user?r("pre",{staticClass:"pl-4"},[e._v(e._s(e.user))]):r("br"),r("b",{staticClass:"mb-2"},[e._v("Token: ")]),e.token?r("span",{attrs:{title:e.token}},[e._v("\n    "+e._s(e.token.slice(0,40)+"...")+"\n  ")]):r("span",[e._v("–")]),r("br"),r("b",[e._v("Token expiration:")]),r("span",{domProps:{innerHTML:e._s(e.tokenExpiresInFormated||" –")}}),r("br"),r("b",[e._v("Refresh token expiration:")]),r("span",{domProps:{innerHTML:e._s(e.refreshTokenExpiresInFormated||" –")}})])},A=[];function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(r,!0).forEach(function(t){Object(i["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var q={data:function(){return{form:{email:"",password:""},loading:!1,tokenExpiresInFormated:null,refreshTokenExpiresInFormated:null}},computed:V({},Object(u["d"])("auth",["token","refreshToken","tokenExpiresIn","refreshTokenExpiresIn","user"]),{},Object(u["c"])("auth",["loggedIn"])),mounted:function(){Math.floor(Date.now()/1e3),this.setExpiresTime(),setInterval(this.setExpiresTime,1e3)},methods:V({submit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.signin(this.form);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](1);case 8:this.loading=!1;case 9:case"end":return e.stop()}},e,this,[[1,6]])}));function t(){return e.apply(this,arguments)}return t}(),setExpiresTimeByToken:function(e){if(this.loggedIn){var t=this[e+"ExpiresIn"]-Math.floor(Date.now()/1e3),r=Math.abs(t),n="0".concat(Math.floor(r/3600),"h").slice(-3),a="0".concat(Math.floor(r%3600/60),"m").slice(-3),o="0".concat(Math.floor(r%60),"s").slice(-3),s=[n,a,o].join(":");this[e+"ExpiresInFormated"]=t<=0?'<span style="color: red"> token expired '.concat(s.slice(1)," ago.</span>"):s}else this[e+"ExpiresInFormated"]=null},setExpiresTime:function(){this.setExpiresTimeByToken("token"),this.setExpiresTimeByToken("refreshToken")}},Object(u["b"])("auth",["signin"]))},H=q,F=Object(m["a"])(H,U,A,!1,null,null,null),G=F.exports;function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(r,!0).forEach(function(t){Object(i["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var K={name:"Home",components:{Auth:G},data:function(){return{users:[],loading:!1}},computed:W({},Object(u["d"])("auth",["user"]),{},Object(u["c"])("auth",["loggedIn"])),watch:{loggedIn:function(e){e&&this.fetchUsers()}},mounted:function(){this.loggedIn&&this.fetchUsers()},methods:{fetchUsers:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$get("users");case 3:this.users=e.sent,this.loading=!1;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},J=K,X=Object(m["a"])(J,N,L,!1,null,null,null),z=X.exports,Y=[{name:"signup",path:"/signup",component:function(){return r.e("signup").then(r.bind(null,"5794"))},meta:{guest:!0}},{name:"signin",path:"/signin",component:function(){return r.e("signin").then(r.bind(null,"a50e"))},meta:{guest:!0}},{name:"forgot-password",path:"/forgot-password",component:function(){return r.e("signin").then(r.bind(null,"66e9"))},meta:{guest:!0}},{name:"reset-password",path:"/reset-password/:token/:email",component:function(){return r.e("signin").then(r.bind(null,"6127"))},meta:{guest:!0}},{name:"verify-email",path:"/verify-email",component:function(){return r.e("signin").then(r.bind(null,"9b60"))}}],Q=[{path:"/profile",component:function(){return r.e("profile").then(r.bind(null,"4bf6"))},children:[{name:"profile",path:"",component:function(){return r.e("profile-main-info").then(r.bind(null,"2c8e"))},meta:{auth:!0}},{name:"profile-change-password",path:"/change-password",component:function(){return r.e("profile-change-password").then(r.bind(null,"2fff"))},meta:{auth:!0}}]}],Z=[{name:"about",path:"/about",component:function(){return r.e("about").then(r.bind(null,"a1d1"))}}],ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("table",{directives:[{name:"show",rawName:"v-show",value:e.roles&&e.loggedIn,expression:"roles && loggedIn"}],staticClass:"table"},[e._m(0),r("tbody",e._l(e.roles,function(t){return r("tr",{key:t.id},[r("th",{attrs:{scope:"row"}},[e._v(e._s(t.id))]),r("td",[e._v(e._s(t.name))]),r("td",[e._v(e._s(t.created_at))])])}),0)])])},te=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",{staticClass:"thead-light"},[r("tr",[r("th",{attrs:{scope:"col"}},[e._v("id")]),r("th",{attrs:{scope:"col"}},[e._v("Name")]),r("th",{attrs:{scope:"col"}},[e._v("Created at")])])])}];function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(r,!0).forEach(function(t){Object(i["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ae,oe={name:"Home",components:{Auth:G},data:function(){return{roles:[],loading:!1}},computed:ne({},Object(u["d"])("auth",["user"]),{},Object(u["c"])("auth",["loggedIn"])),watch:{loggedIn:function(e){e&&this.fetchRoles()}},mounted:function(){this.loggedIn&&this.fetchRoles()},methods:{fetchRoles:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$get("roles");case 3:this.roles=e.sent,this.loading=!1;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},se=oe,ie=Object(m["a"])(se,ee,te,!1,null,null,null),ue=ie.exports,ce=[{path:"/",component:D,children:[{name:"home",path:"",component:z},{name:"role",path:"/roles",component:ue}].concat(Object(b["a"])(Y),Object(b["a"])(Q),Object(b["a"])(Z),[{path:"*",component:function(){return r.e("page404").then(r.bind(null,"ee5d"))}}])}],le=r("0759"),pe=r.n(le),fe=a["a"].prototype,me="USER",he="USER_LOGGED_IN",de="USER_LOGGED_OUT",ge="TOKEN",ve="REFRESH_TOKEN_EXPIRED",be={namespaced:!0,state:{},mutations:{},actions:{sendEmail:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,o,s,i,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.dispatch,t.commit,n=Le.resolve({name:"reset-password",params:{token:"<token>",email:"<email>"}}),a=n.href,o=location.port?":"+location.port:"",s=location.protocol+"//"+location.hostname+o+a,e.next=6,fe.$post("auth/forgot-password-email",{email:r,resetUrl:s});case 6:i=e.sent,u=i.message,fe.$notify.success(u);case 9:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),resetPassword:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,t.commit,e.next=3,fe.$post("auth/forgot-password-reset",r);case 3:return a=e.sent,a.showMsg=!1,e.next=7,n("auth/loggedIn",a,{root:!0});case 7:fe.$notify.success("Password has been reset successfully!");case 8:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()}},we={namespaced:!0,state:{},mutations:{},actions:{resend:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.dispatch,t.commit,e.next=3,fe.$post("auth/email/resend");case 3:r=e.sent,fe.$notify.success(r);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),verify:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,o,s,i,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,t.commit,e.prev=1,e.next=4,fe.$post(r);case 4:a=e.sent,o=a.message,s=a.user,n("auth/setUser",s,{root:!0}),fe.$notify.success(o),Le.push({name:"profile"}),e.next=18;break;case 12:e.prev=12,e.t0=e["catch"](1),i=e.t0.response,u=i.status,i.message,401===u?Le.push({name:"signin"}):429===u&&Le.push({name:"profile"});case 18:case"end":return e.stop()}},e,null,[[1,12]])}));function t(t,r){return e.apply(this,arguments)}return t}()}},ye={user:"auth__user",token:"auth__token",tokenExpiresIn:"auth__tokenExpiresIn",refreshTokenExpiresIn:"auth__refreshTokenExpiresIn"},Oe=50,xe="auth/",ke=null,je={namespaced:!0,modules:{forgotPassword:be,emailVerification:we},state:{user:JSON.parse(localStorage.getItem(ye.user)),token:localStorage.getItem(ye.token),tokenExpiresIn:+localStorage.getItem(ye.tokenExpiresIn),refreshTokenExpiresIn:+localStorage.getItem(ye.refreshTokenExpiresIn),refreshTokenAlreadyExpired:!1},mutations:(ae={},Object(i["a"])(ae,me,function(e,t){return e.user=t,localStorage.setItem(ye.user,JSON.stringify(t)),t}),Object(i["a"])(ae,ge,function(e,t){console.log("token_global",t),e.token=t&&t.accessToken||"",e.tokenExpiresIn=+(t&&t.expiresIn)||"",e.refreshTokenExpiresIn=+(t&&t.refreshTokenExpiresIn)||"",localStorage.setItem(ye.token,e.token),localStorage.setItem(ye.tokenExpiresIn,e.tokenExpiresIn),localStorage.setItem(ye.refreshTokenExpiresIn,e.refreshTokenExpiresIn)}),Object(i["a"])(ae,ve,function(e){e.refreshTokenAlreadyExpired||(e.refreshTokenAlreadyExpired=!0,Re(),Pe())}),Object(i["a"])(ae,he,function(e){e.refreshTokenAlreadyExpired=!1,Te.state.route.meta.guest&&Le.push({name:"profile"}),Ee(e)}),Object(i["a"])(ae,de,function(e,t){Re(),Te.state.route.meta.auth&&Le.push({name:"signin"}),Te.state.route.meta.guest&&Le.push("/")}),ae),actions:{signin:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,t.commit,e.next=3,fe.$post("auth/signin",r);case 3:return a=e.sent,e.next=6,n("loggedIn",a);case 6:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),signup:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,t.commit,e.next=3,fe.$post("auth/signup",r);case 3:return a=e.sent,a.showMsg=!1,e.next=7,n("loggedIn",a);case 7:fe.$notify.success("Registered successfully!");case 8:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),loggedIn:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,o,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.dispatch,n=t.commit,a=r.user,o=r.tokenInfo,s=r.showMsg,i=void 0===s||s,n(ge,o),n(me,a),n(he),i&&fe.$notify.success("logged in successfully!");case 6:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),getUser:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,fe.$get("auth/user");case 3:return n=e.sent,a=n.user,e.abrupt("return",r(me,a));case 6:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.commit,e.next=3,fe.$post("auth/logout");case 3:return e.next=5,r("setNullTokenAndUser");case 5:n(de,!0),fe.$notify.success("Logged out successfully.");case 7:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),refresh:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.commit,a=t.state,e.next=3,fe.$post("auth/refresh");case 3:if(o=e.sent,"tokenAlreadyRefreshed"!==o.status){e.next=6;break}return e.abrupt("return");case 6:if("refreshTokenExpired"!==o.status){e.next=10;break}return e.next=9,r("refreshTokenExpired");case 9:return e.abrupt("return");case 10:n(ge,o),Ee(a);case 12:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),refreshTokenExpired:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.commit,e.next=3,r("setNullTokenAndUser");case 3:n(ve),n(de,!1);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),setNullUser:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,r(me,null);case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),setNullTokenAndUser:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.commit,r(ge,null),r(me,null);case 3:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),setUser:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n(me,r);case 2:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),init:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.state,Ee(r);case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},getters:{loggedIn:function(e){return!!e.user},tokenNeedToRefresh:function(e){var t=e.tokenExpiresIn-Oe,r=Math.floor(Date.now()/1e3);return e.token&&t<r},tokenExpired:function(e){return e.tokenExpiresIn<Math.floor(Date.now()/1e3)}}},_e=je;function Ee(e){var t=e.token,r=e.tokenExpiresIn;if(t){var a=Date.now()/1e3,o=r-a-Oe,s=o>0?1e3*o:0;clearTimeout(ke),ke=setTimeout(Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Te.dispatch(xe+"refresh");case 2:case"end":return e.stop()}},e)})),s)}}function Re(){clearTimeout(ke)}function Pe(){fe.$notify.info("Please, log in again")}var Ie={namespaced:!0,state:{},mutations:{},actions:{setPassword:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,t.commit,e.next=3,fe.$post("profile/current/set-password",r);case 3:a=e.sent,o=a.message,s=a.user,n("auth/setUser",s,{root:!0}),fe.$notify.success(o);case 8:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()}};a["a"].use(u["a"]);var Te=new u["a"].Store({plugins:[pe()({predicate:["auth/USER","auth/TOKEN","auth/REFRESH_TOKEN_EXPIRED","auth/USER_LOGGED_IN","auth/USER_LOGGED_OUT"]})],modules:{auth:_e,profile:Ie},state:{},mutations:{},actions:{}});function $e(e){e.beforeEach(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r,n){var a,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=Te.state.auth.token,o=Te.state.auth.user,s=Te.getters["auth/tokenNeedToRefresh"],e.prev=3,e.t0=!o&&a&&!s,!e.t0){e.next=8;break}return e.next=8,Te.dispatch("auth/getUser");case 8:e.next=13;break;case 10:e.prev=10,e.t1=e["catch"](3),console.error(e.t1);case 13:!a&&o&&Te.dispatch("auth/setNullUser"),n();case 15:case"end":return e.stop()}},e,null,[[3,10]])}));return function(t,r,n){return e.apply(this,arguments)}}())}function Ce(e){e.beforeEach(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r,n){var a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.matched.some(function(e){return e.meta.auth}),o=Te.state.auth.user,!a||o){e.next=6;break}return n({name:"signin"}),fe.$notify.error("This page requires authentication!"),e.abrupt("return");case 6:n();case 7:case"end":return e.stop()}},e)}));return function(t,r,n){return e.apply(this,arguments)}}())}function Se(e){e.beforeEach(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r,n){var a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.matched.some(function(e){return e.meta.guest}),o=Te.state.auth.user,!a||!o){e.next=6;break}return r.fullPath?n(!1):n({name:"home"}),fe.$notify.error("This page is for guests only!"),e.abrupt("return");case 6:n();case 7:case"end":return e.stop()}},e)}));return function(t,r,n){return e.apply(this,arguments)}}())}var De=function(e){$e(e),Ce(e),Se(e)};a["a"].use(g["a"]);var Ne=new g["a"]({mode:"history",base:"/",routes:ce});Object(v["sync"])(Te,Ne),De(Ne);var Le=Ne,Ue=(r("2583"),r("bc3a")),Ae=r.n(Ue),Me=r("0987"),Ve=(r("ac4d"),r("8a81"),r("7bb1")),qe={name:"required|alpha_spaces|max:30",email:"email",password:"required|min:5"},He=new Ve["a"](qe),Fe=function(e){var t=e.data,r=t.errors,n="";if(r){for(var a in r)if(r.hasOwnProperty(a)){var o=!0,s=!1,i=void 0;try{for(var u,c=r[a][Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;n+="".concat(l,"<br>")}}catch(p){s=!0,i=p}finally{try{o||null==c.return||c.return()}finally{if(s)throw i}}}}else n=t.message;fe.$notify.error(n)},Ge="http://paywage.test/api/";a["a"].use(Me["a"],{axios:Ae.a,config:{baseURL:Ge,headers:{"X-Requested-With":"XMLHttpRequest"}},interceptors:{beforeRequest:function(e,t){if(e.baseURL===Ge){var r=Te.state.auth.token;r&&(e.headers.Authorization="Bearer ".concat(r))}return e},beforeResponseError:function(e){var t=e.response,r=e.message;t?Fe(t):r&&fe.$notify.error(r)}}});r("f0bd"),r("3e48"),r("ab8b");var Be=r("e440"),We=r.n(Be),Ke=r("2685"),Je=r.n(Ke);r("6705");function Xe(e){var t=e.title,r=e.message,n=e.type,a=e.timeout;e.cb;return n===We.a.types.warn&&(n="warning"),Je.a[n]({title:t,message:r,timeout:a})}var ze={success:Xe,error:Xe,info:Xe,warn:Xe},Ye={},Qe=function(e){Ye[e]=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.timeout,o=void 0===a?3e3:a;Xe({type:e,title:t,message:r,timeout:o})}};for(var Ze in ze)Qe(Ze);a["a"].use(We.a,ze),a["a"].prototype.$notify=Ye,a["a"].use(Ve["b"]),a["a"].prototype.$formValidator={rules:qe,validate:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.validator.validateAll(t));case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),validator:He},a["a"].config.productionTip=!1,a["a"].prototype.$auth={get user(){return Te.state.auth.user},get loggedIn(){return Te.getters["auth/loggedIn"]}},a["a"].prototype.$actionWithLoading=function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,o,s=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(r=s.length>1&&void 0!==s[1]?s[1]:"loading",this[r]=!0,e.prev=2,n=s.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=s[o];return e.next=6,t.apply(void 0,a);case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](2),e.t0;case 11:return e.prev=11,this[r]=!1,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[2,8,11,14]])}));return function(t){return e.apply(this,arguments)}}(),new a["a"]({router:Le,store:Te,render:function(e){return e(d)}}).$mount("#app"),Te.dispatch("auth/init")},"7faf":function(e,t,r){"use strict";var n=r("dc71"),a=r.n(n);a.a},dc71:function(e,t,r){}});
//# sourceMappingURL=app.17058142.js.map